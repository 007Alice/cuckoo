"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,a){for(var i=0;i<a.length;i++){var l=a[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(a,i,l){return i&&t(a.prototype,i),l&&t(a,l),a}}(),SummaryBehaviorDetail=function(){function t(a,i,l,s,e){_classCallCheck(this,t),this.task_id=a,this.pname=i,this.pid=l,this.category=s,this.val=e,this.limit=5,this.offset=0,this._setup=!1,this._sel=$("section#summary div#summary_"+this.category)}return _createClass(t,[{key:"start",value:function(t,a){var i={task_id:this.task_id,pid:this.pid,watcher:this.val,pname:this.pname};null!=t?i.offset=t:i.offset=this.offset,null!=a?i.limit=a:i.limit=this.limit;var l=this;CuckooWeb.api_post("/analysis/api/task/behavior_get_watcher/",i,function(t){l.start_cb(t,l)})}},{key:"_setup_html",value:function(t){var a='\n            <li id="cat_'+t.val+'" class="list-group-item">\n                <p><b>'+t.val+'</b></p>\n                <ul id="'+t.val+'"></ul>\n                <p class="btn_action">\n                    <span class="load_more">Load more</span> | <span class="load_all">Load all</span>\n                </p>\n            </li>';t._sel.find("ul#"+t.pid).append(a),t._sel.find("ul#"+t.pid+" #cat_"+t.val+" .btn_action .load_more").click(function(){t.more()}),t._sel.find("ul#"+t.pid+" #cat_"+t.val+" .btn_action .load_all").click(function(){t.all()}),t._setup=!0}},{key:"start_cb",value:function(t,a){a._setup||a._setup_html(a);var i=a._sel.find("ul#"+a.pid+" #cat_"+a.val);t.data.length<a.limit&&0!=a.offset?i.find(".btn_action").html('<span class="no_results">No more results...</span>'):t.data.length<a.limit&&0==a.offset&&i.find(".btn_action").hide();var l="";t.data.forEach(function(t,a){l+="<li>"+t+"</li>"}),i.find("ul#"+a.val).append(l)}},{key:"more",value:function(){this.offset+=this.limit,this.start()}},{key:"all",value:function(){t.clear_list(this),t.clear_ctrl_btns(this),this.start(0,0)}}],[{key:"clear_list",value:function(t){t._sel.find("ul#"+t.pid+" #cat_"+t.val+" ul#"+t.val).html("")}},{key:"clear_ctrl_btns",value:function(t){t._sel.find("ul#"+t.pid+" #cat_"+t.val+" .btn_action").hide()}}]),t}(),SummaryBehaviorController=function(){function t(a,i,l){_classCallCheck(this,t),this.task_id=a,this.pname=i,this.pid=l,this.loading=!1,this.loader=new Loader($(".loading")),this.behavioral_details=[]}return _createClass(t,[{key:"start",value:function(){var t={task_id:this.task_id,pid:this.pid},a=this;CuckooWeb.api_post("/analysis/api/task/behavior_get_watchers/",t,function(t){a.start_cb(t,a)})}},{key:"start_cb",value:function(t,a){$.each(t.data,function(t,i){var l=t,s=$("div#summary_"+l);s.append('\n                <div class="panel panel-default">\n                    <div class="panel-heading"><h3 class="panel-title">'+a.pname+" <small>pid: "+a.pid+'</small></h3></div>\n                    <ul id="'+a.pid+'" class="list-group">\n                    </ul>\n                </div>'),$.each(i,function(t,i){var s=new SummaryBehaviorDetail(a.task_id,a.pname,a.pid,l,i);s.start(),a.behavioral_details.push(s)})})}}],[{key:"toggle_loading",value:function(){this.loader.toggle()}}]),t}();
//# sourceMappingURL=analysis_behavior.js.map
